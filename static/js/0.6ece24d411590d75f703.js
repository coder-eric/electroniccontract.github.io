webpackJsonp([0],{e6PQ:function(t,e,s){"use strict";function n(t){s("uZHc")}Object.defineProperty(e,"__esModule",{value:!0});var a=s("3cXf"),o=s.n(a),r=s("gyMJ"),i={data:function(){return{id:-1,account:null,form:{name:"",firstParty:"",partyB:"",content:"",status:0}}},mounted:function(){this.$route.path.indexOf("add")<0?(this.id=this.$route.params.id,this.form=this.$store.state.contractList[this.id]):this.form.firstParty=this.$store.state.address},methods:{handleAddAndModify:function(t){var e=this,s=[this.id,o()({name:this.form.name,firstParty:this.$store.state.address,partyB:this.form.partyB,content:this.form.content,status:t})];Object(r.a)(s).then(function(t){0===t.code&&e.$message.success("提交成功，一分钟后查看交易状态")})},onConfirm:function(){var t=this;this.$confirm("签署后合同将生效, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.$request("call","confirm",[t.id]).then(function(e){console.log("确认：",e),t.$message({type:"success",message:"签署成功!"})})})},onRevoke:function(){var t=this;this.$request("call","revoke",[this.id]).then(function(e){console.log("撤销：",e),t.$message({type:"success",message:"撤销成功!"})})},onSubmit:function(t){this.form.name||this.$message.error("请输入合同名称！"),this.form.partyB||this.$message.error("请输入乙方钱包地址！"),this.form.content||this.$message.error("请输入合同正文！"),console.log("submit!"),this.handleAddAndModify(t)}}},l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"linkmap"},[t._v(t._s(t.linkMap))]),t._v(" "),s("el-card",{staticClass:"box-card"},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"合同名称"}},[s("el-input",{attrs:{placeholder:"请输入合同名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"甲方"}},[s("el-input",{attrs:{placeholder:"请输入甲方钱包地址",disabled:""},model:{value:t.form.firstParty,callback:function(e){t.$set(t.form,"firstParty",e)},expression:"form.firstParty"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"乙方"}},[s("el-input",{attrs:{placeholder:"请输入乙方钱包地址"},model:{value:t.form.partyB,callback:function(e){t.$set(t.form,"partyB",e)},expression:"form.partyB"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"合同正文"}},[s("el-input",{staticClass:"textarea",attrs:{type:"textarea",size:"small"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),s("el-form-item",{staticClass:"btn-field"},[t.form.partyB==t.$store.state.address&&1==t.form.status?s("el-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("签署合同")]):t._e(),t._v(" "),t.form.firstParty==t.$store.state.address&&1==t.form.status?s("el-button",{attrs:{type:"primary"},on:{click:t.onRevoke}},[t._v("撤回合同")]):t._e(),t._v(" "),t.form.firstParty==t.$store.state.address&&0==t.form.status?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit(1)}}},[t._v("发送合同")]):t._e(),t._v(" "),t.form.firstParty==t.$store.state.address&&0==t.form.status?s("el-button",{on:{click:function(e){t.onSubmit(0)}}},[t._v("保存草稿")]):t._e()],1)],1)],1)],1)},c=[],f={render:l,staticRenderFns:c},m=f,d=s("vSla"),u=n,p=d(i,m,!1,u,"data-v-78c567e6",null);e.default=p.exports},uZHc:function(t,e,s){var n=s("uviS");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);s("FIqI")("aa81e474",n,!0,{})},uviS:function(t,e,s){e=t.exports=s("UTlt")(!0),e.push([t.i,"\n.textarea[data-v-78c567e6] {\n  min-height: 240px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.btn-field[data-v-78c567e6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n","",{version:3,sources:["c:/git/nas-blockchain/electronicContract/src/pages/addAndModify.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;CACf;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,sBAAsB;MAClB,mBAAmB;UACf,0BAA0B;CACnC",file:"addAndModify.vue",sourcesContent:["\n.textarea[data-v-78c567e6] {\n  min-height: 240px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.btn-field[data-v-78c567e6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=0.6ece24d411590d75f703.js.map